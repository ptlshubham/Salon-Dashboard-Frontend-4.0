<div class="row" *ngIf="isOpen==true">
  <div class="card">
    <div class="card-header">
      <div class="d-flex justify-content-between">
        <h5 class="card-title">Join Our Membership</h5>
        <button type="submit" class="btn btn-danger waves-effect waves-light" (click)="backToTable()">
          <i class="bx bx-arrow-back font-size-16 align-middle"></i>
          Back
        </button>
      </div>
    </div>
    <div class="card-body">
      <div>
        <form [formGroup]="validationForm">
          <input type="hidden" />
          <div class="row">
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
              <div class="mb-3">
                <label for="basicpill-phoneno-input1" class="form-label">Contact
                  Number</label>
                <input type="number" formControlName="contact"
                  [ngClass]="{ 'is-invalid': f.contact.touched && f.contact.errors }" class="form-control" id="contact"
                  [(ngModel)]="searchContact" placeholder="Enter Registered Number">
                <div *ngIf="f.contact.touched || f.contact.invalid || f.contact.pristine" class="invalid-feedback">
                  <div *ngIf="f.contact.errors?.required">Mobile number is
                    required.</div>
                  <div *ngIf="f.contact.errors?.pattern">Please, Enter 10 digit
                    Mobile number.</div>
                </div>
              </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-6 col-xs-12">
              <label class="form-label"></label>
              <button type="submit" class="btn btn-primary" style="margin-top:1.7rem !important"
                (click)="getCustomer(searchContact)"><i class="bx bx-search-alt font-size-16 align-middle"></i>
                Search</button>
            </div>
          </div>
        </form>
      </div>
      <div *ngIf="showDetails==true">
        <hr class="my-3">
        <div>
          <form>
            <input type="hidden" />
            <div class="row">
              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <div class="form-group mb-3">
                  <label>First Name</label>
                  <input type="text" class="form-control disabled-c" id="fname" placeholder="Enter First Name"
                    [(ngModel)]="memberShipModel.fname" [ngModelOptions]="{standalone: true}" disabled>
                </div>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <div class="form-group mb-3">
                  <label>Last Name</label>
                  <input type="text" class="form-control disabled-c" id="fname" placeholder="Enter Last Name"
                    [(ngModel)]="memberShipModel.lname" [ngModelOptions]="{standalone: true}" disabled>
                </div>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <div class="form-group mb-3">
                  <label>Email</label>
                  <input type="email" class="form-control disabled-c" id="email" placeholder="Enter Email Address"
                    [(ngModel)]="memberShipModel.email" [ngModelOptions]="{standalone: true}" disabled>
                </div>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <div class="mb-3">
                  <label for="basicpill-phoneno-input1" class="form-label">Contact
                    Number</label>
                  <input type="number" class="form-control disabled-c" id="contact"
                    [(ngModel)]="memberShipModel.contact" [ngModelOptions]="{standalone: true}" disabled
                    placeholder="Enter Alternate Number">
                </div>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <div class="mb-3">
                  <label for="basicpill-phoneno-input1" class="form-label">Whatsapp
                    Number</label>
                  <input type="number" class="form-control disabled-c" id="whatsapp"
                    [(ngModel)]="memberShipModel.whatsapp" [ngModelOptions]="{standalone: true}" disabled
                    placeholder="Enter Alternate Number">
                </div>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <div class="mb-3">
                  <label for="basicpill-phoneno-input1" class="form-label">Gender</label>
                  <input type="text" class="form-control disabled-c" id="gender" [(ngModel)]="memberShipModel.gender"
                    [ngModelOptions]="{standalone: true}" disabled placeholder="Enter Alternate Number">
                </div>
              </div>
            </div>
          </form>
        </div>
        <hr class="my-3">
      </div>
      <div class="row">
        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
          <div class="form-group mb-3">
            <label class="form-label">Select
              Payment Type</label>
            <select required class="form-select" (change)="onMembershipPackageChange($event)">
              <option value="" hidden>Select Membership Package</option>
              <option *ngFor="let c of memberShipList">{{c.membershipname}}</option>
            </select>
          </div>
        </div>
      </div>
      <div *ngIf="memberShipServices.length > 0">
        <div class="table-responsive mt-5">
          <table class="table mb-0">
            <thead class="table-light">
              <tr>
                <th class="text-left">#</th>
                <th class="text-center">Services Name</th>
                <th class="text-center">Service Price</th>
                <th class="text-center">Number Of Service</th>
                <th class="text-center">Total Price</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let a of memberShipServices; let i = index">
                <td class="text-left">{{ a.index }}</td>
                <td class="text-center">{{ a.servicesname }}</td>
                <td class="text-center">{{ a.serviceprice }} ₹</td>
                <td class="text-center">{{ a.quantity }}</td>
                <td class="text-center">{{ a.totalprice }} ₹</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="row mt-5">
          <div class="d-flex justify-content-end gap-1">
            <div class="hstack gap-3">
              <div class="grid-example">
                Discount:
                <span class="text-primary"><b> {{ selectedMemberShip.membershipdiscount }} %</b></span>
              </div>
              <div class="vr"></div>
              <div class="grid-example">
                Total Price:
                <span class="text-primary"><b> {{ selectedMemberShip.totalprice }} ₹</b></span>
              </div>
              <div class="vr"></div>
              <div class="grid-example">
                Offer Price:
                <span class="text-success"><b>{{ selectedMemberShip.membershipprice }} ₹</b></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <div class="form-group">
        <div class="row justify-content-end">
          <div class="col-lg-1 col-xl-1 col-md-1 col-sm-2 col-xs-12">
            <button type="submit" class="btn btn-primary" (click)="saveJoinMemberShipDetail()"
              *ngIf="isUpdate == false">
              Submit
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row" *ngIf="isOpen==false">
  <div class="card">
    <div class="card-header">
      <div class="d-flex justify-content-between">
        <h5 class="card-title">Purchased Membership List</h5>
        <button type="button" class="btn btn-primary waves-effect btn-label waves-light" (click)="openAddMembership()">
          <i class="bx bx-user-plus label-icon"></i> Join Membership
        </button>
      </div>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table mb-0">
          <thead class="table-light">
            <tr>
              <th class="text-left">#</th>
              <th class="text-center">Customer Name</th>
              <td class="text-center">Contact</td>
              <th class="text-center">Membership Package Name</th>
              <th class="text-center">Total Price</th>
              <th class="text-center">Membership Price</th>
              <th class="text-center">Membership Discount</th>
              <th class="text-center">Status</th>
              <th class="text-end">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let s of paginateData; let i = index">
              <td class="text-left">{{ s.index }}</td>
              <td class="text-center">{{ s.fname }} {{ s.lname }}</td>
              <td class="text-center">{{ s.contact }}</td>
              <td class="text-center">{{ s.membershipname }}</td>
              <td class="text-center">{{ s.totalprice }} ₹</td>
              <td class="text-center">{{ s.membershipprice }} ₹</td>
              <td class="text-center">{{ s.membershipdiscount}} %</td>

              <td class="text-center">
                <button type="button" class="btn btn-success waves-effect btn-label waves-light" *ngIf="s.isactive">
                  <i class="bx bx-check-double label-icon"></i> Active
                </button>
                <button type="button" class="btn btn-danger waves-effect btn-label waves-light" *ngIf="!s.isactive">
                  <i class="bx bx-block label-icon"></i> Deactive
                </button>
              </td>
              <td class="text-end">
                <div class="d-flex justify-content-end gap-1">
                  <button type="button" class="btn btn-soft-primary waves-effect waves-light"
                    ngbTooltip="Edit Membership" placement="top" (click)="viewMembershipDetails(s)">
                    <i class="bx bx-edit font-size-16 align-middle"></i>
                  </button>
                  <!-- <button type="button" class="btn btn-soft-danger waves-effect waves-light"
                    (click)="removeMembershipDetailes(s.id)" ngbTooltip="Remove Membership" placement="top">
                    <i class="bx bx-trash-alt font-size-16 align-middle"></i>
                  </button> -->
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="row mt-4">
        <ngb-pagination [collectionSize]="collectionSize" [pageSize]="pageSize" [(page)]="page" [maxSize]="5"
          [rotate]="true" [ellipses]="false" [boundaryLinks]="true" (pageChange)="getPagintaion()"
          aria-label="Default pagination"
          class="d-flex justify-content-end pagination-rounded-flat pagination-success"></ngb-pagination>
      </div>
    </div>
  </div>
</div>